# APLIKACJA KARDIOASYSTENT 
Naszym celem jest stworzenie aplikacji mobilnej na Androida "KARDIOASYSTENT", która ma na celu wspomaganie leczenia i terapii u pacjentów chorych na nadciśnienie tętnicze i umożliwienie monitorowania wartości ciśnienia tętniczego krwi oraz tętna  użytkownikowi, u którego dotychczas choroby układu krążenia nie występowały, co może wspomóc diagnostykę związaną z występowaniem potencjalnych chorób układu sercowo-naczyniowego.
***
## INNOWACJE WPROWADZONE NA KURSIE ZAAWANSOWANE PROGRAMOWANIE OBIEKTOWE 2 (2024/2025)
### RAPORTY WARTOŚCI TĘTNA I CIŚNIENIA KRWI WRAZ Z WYKRESAMI
Dodałyśmy nowe layouty realizujące funkcjonalność raportów. Użytkownik z okna statystyk może przejść do okna raportów poprzez kliknięcie przycisku RAPORTY. W oknie RAPORT TĘTNA użytkownik ma dostęp do wykresu pokazującego zmiany w średniej wartości tętna w ciągu trzydziestu ostatnich dni. Na wykresie są również dodane linie wskazujące górny i dolny limit normy tętna dla wieku i płci użytkownika. Pod wykresem wyświetlane są natomiast użytkownikowi wartości takie jak: maksymalne HR (HR - heart rate), minimalne HR, średnia HR z ostatnich 30 dni i procent wyników w normie dla wieku i płci, co stanowi cenną informację diagnostyczną. Ponadto na layoucie z raportem tętna jest umieszczony przycisk strzałki znajdujący się po prawej stronie ekranu, który umożliwia przejście do layoutu z raportem ciśnienia krwi. Idea działania jest następująca: użytkownik po jednorazowym kliknięciu na strzałkę otrzymuje komunikat: Kliknij ponownie, aby przejść do raportu ciśnienia, po kolejnym kliknięciu użytkownik jest automatycznie przekierowywany do widoku RAPORT CIŚNIENIA. Umieszczono w nim wykres obrazujący przebieg zmian ciśnienia skurczowego i rozkurczowego w ciągu ostatnich 30 dni (średnie wartości obu ciśnień wyznaczone dla każdego dnia). Na obu wykresach są również umieszczone linie wskazujące dolny i górny limit ciśnienia skurczowego i rozkurczowego dla wieku i płci zalogowanego użytkownika. Pod wykresami umieszczono informacje o maksymalnej, minimalnej i średniej wartości ciśnienia skurczowego oznaczonego jako SYS (skrót od ang. systolic) i analogiczne informacje dla ciśnienia rozkurczowego oznaczonego jako DIA (od ang. diastolic). Z widoku zawierającego raport ciśnienia użytkownik poprzez kliknięcie przycisku POWRÓT przenoszony jest do okna z raportem tętna. Z kolei przycisk WYŚLIJ umieszczony w tym layoucie umożliwia wysłanie wyników ciśnienia i tętna do analizy przez sztuczną inteligencję.
### PORADNIK ZDROWIA Z FUNKCJĄ LOSOWANIA PORAD
Dodatkową innowacją wprowadzoną w tym semestrze do aplikacji jest również poradnik zdrowia w formie losowanych porad zdrowotnych. Użytkownik przechodząc z aktywności głównej do poradnika zdrowia ma możliwość przeczytania wyświetlonej dla niego "rady dnia", natomiast, jeśli chce uzyskać kolejne porady wystarczy, że kliknie przycisk "Wylosuj kolejną radę", po kliknięciu przycisku wyświetla się mu następna rada dotycząca np. diety, snu, czy aktywności fizycznej. Użytkownik może losować dowolną ilość rad dziennie. Wprowadzona innowacja ma na celu zwiększenie świadomości użytkowników aplikacji dotyczącej prawidłowych nawyków umożliwiających zachowanie dobrej kondycji układu sercowo-naczyniowego. W ramach implementacji poradnika zdrowia porady zdrowotne zapisano jako dokumenty w kolekcji HealthTips w Firestore.
### POWIADOMIENIA PUSH
Zaimplementowałyśmy powiadomienia push, które wykorzystują Firebase Cloud Messaging (FCM). Funkcją powiadomień jest zwrócenie użytkownikowi uwagi na konieczność wejścia do naszej aplikacji, by regularnie dbał o zdrowie swojego serca. Tytuł powiadomienia jest następujący: TU TWÓJ KARDIOASYSTENT a treść to: Bądź na bieżąco i zobacz swoje aktualne statystyki. Zaimplementowane powiadomienia mają na celu zachęcenie użytkownika do regularnego korzystania z aplikacji w celu dbania o kondycję układu krwionośnego. Oprócz powiadomień push zrobiłyśmy też powiadomienie pokazujące się po wprowadzeniu wyniku pomiaru: treść powiadomienia jest następująca: Twój pomiar został pomyślnie dodany. Kliknij, aby zobaczyć statystyki. Po kliknięciu w to powiadomienie, użytkownik jest przekierowywany do okna statystyk, gdzie może zobaczyć, jak wprowadzony pomiar wpłynął na raporty i statystyki. Ma to na celu zwrócenie użytkownikowi uwagi na to, jak prezentują się jego aktualne statystki zdrowotne.
### OBSŁUGA MAP GOOGLE
Zaimplementowałyśmy funkcjonalność map Google w naszej aplikacji. Mapy znajdują się w oddzielnej aktywności aplikacji, do której można przejść klikając przycisk MAPA w oknie głównym. Po przejściu do aktywności mapy użytkownik ma możliwość znalezienia miejsc w jednej z trzech dostępnych kategorii (szpital/apteka/lekarz), ponadto użytkownik może wybrać promień wyszukiwania od 5 km do 100 km. W zależności od wybranej kategorii i promienia odległości wyświetlają się zadane wyniki wyszukiwania w postaci markerów na mapie podpisanych nazwami znalezionych miejsc. Kolejnym udogodnieniem dostępnym w oknie map jest pojawienie się po wejściu w tę aktywność najbliższej apteki, najbliższego szpitala i najbliższego lekarza, co jest istotne, jeśli użytkownik w pośpiechu chce znaleźć miejsce, do którego najszybciej dotrze. Celem zaimplementowania map było więc przede umożliwienie użytkownikowi znalezienie placówek medycznych i aptek w zakresie od 5 do 100 km od jego bieżącej lokalizacji. Jest to niezwykle ważne, gdyż w przypadku wystąpienia niepokojących objawów ze strony układu sercowo-naczyniowego użytkownik aplikacji może w szybki sposób znaleźć miejsce świadczące usługi medyczne i zgłosić się tam po profesjonalną pomoc lub wybrać się do apteki np. w przypadku potrzeby wykupienia konkretnego leku. Ponadto w aplikacji zaimplementowano także funkcjonalność prowadzenia do wybranej apteki, szpitala, czy lekarza. Nawigacja odbywa się poprzez kliknięcie pinezki miejsca, do którego chce się dostać użytkownik. Po kliknięciu na pinezkę pojawia się komunikat: Wybrano miejsce ..., kliknij NAWIGUJ, aby rozpocząć nawigację. Po kliknięciu NAWIGUJ użytkownik przenoszony jest do aplikacji Google Maps, w której następuje prowadzenie do wybranego miejsca docelowego. Obsłużono w aplikacji również przypadek kliknięcia NAWIGUJ bez uprzednio wybranej pinezki miejsca. W takim przypadku wyświetla się komunikat: Wybierz najpierw miejsce klikając na pinezkę oraz przypadek, jeśli użytkownik nie ma zainstalowanej na telefonie aplikacji Google Maps, wówczas po kliknięciu nawiguj otrzymuje komunikat: Zainstaluj aplikację Google Maps, aby korzystać z nawigacji.
### CHAT ZE SZTUCZNĄ INTELIGENCJĄ AI
Wprowadzono również do aplikacji funkcjonalność czatu pomiędzy zalogowanym użytkownikiem a sztuczną inteligencją ChatGPT. Do czatu użytkownik przechodzi poprzez przycisk WYŚLIJ z layoutu raportu ciśnienia. Jako pierwsze pytanie sugerowane jest zapytanie o treści: Czy następujące wyniki pomiarów tętna: minimalne tętno: ..., maksymalne tętno: ..., średnie tętno: ... są dobre? Czy ciśnienie skurczowe o wartościach: minimalne: ..., maksymalne: ..., średnie: ... jest prawidłowe? Podobnie, czy ciśnienie rozkurczowe minimalne: ..., maksymalne: ..., średnie: ... są w normie? Jeśli nie, co mogę zrobić, aby poprawić swoje zdrowie?. Następnie użytkownik otrzymuje odpowiedź z interpretacją wyników i wskazówkami związanymi z tym, co może zrobić, by poprawić zdrowie swojego układu krwionośnego. Później użytkownik może również zapytać AI o inne cenne wskazówki związane na przykład z polecanymi aktywnościami fizycznymi wzmacniającymi serce lub na przykład może poprosić AI o podanie diety polecanej dla osób chorujących na choroby układu krążenia itd.
### Poprawa funkcjonalności i wyglądu layoutów w aplikacji
W całej aplikacji dokonano poprawek związanych z wyglądem layoutów, tak by były bardziej ergonomiczne i userfriendly dla użytkownika. Wiązało się to z poprawą umiejscowienia przycisków, wprowadzeniem ulepszonych komunikatów wyświetlanych na widokach i personalizacją aplikacji dla aktualnie zalogowanego użytkownika.
## ZREALIZOWANE FUNKCJONALNOŚCI
### REJESTRACJA DO APLIKACJI Z ZAIMPLEMENTOWANĄ OBSŁUGĄ Firebase Authentication
Nowy użytkownik ma możliwość zarejestrowania się do naszej aplikacji poprzez wypełnienie formularza rejestracji wyświetlającego się po kliknięciu przycisku ZAREJESTRUJ SIĘ. Formularz rejestracyjny w pierwszej części zawiera pola do wpisania imienia, nazwiska, roku urodzenia, płci oraz wymaga podania informacji o tym, czy użytkownik przyjmuje leki kardiologiczne (TAK/NIE), jeśli odpowiedź jest twierdząca użytkownik musi wpisać nazwę przyjmowanego leku i godzinę jego przyjmowania. Po wypełnieniu wszystkich powyżej zdefiniowanych pól użytkownik klika ZAREJESTRUJ SIĘ i jest przenoszony do drugiej części rejestracji, w której podaje dane wymagane do założenia konta takie jak: email i hasło oraz wybiera preferowane godziny wykonywania pomiarów (rano, w południe i wieczorem). Po wpisaniu tych informacji klika przycisk ZAŁÓŻ KONTO i zostaje przekierowany do strony logowania. 
### LOGOWANIE DO APLIKACJI
Użytkownik zarejestrowany w aplikacji ma możliwość zalogowania się do niej poprzez wpisanie emaila i hasła podanych w procesie rejestracji. Po kliknięciu ZALOGUJ SIĘ, o ile wprowadzone przez niego dane są poprawne, zostaje przeniesiony do głównego okna aplikacji.
### OBSŁUGA BAZY DANYCH Firestore
Zaimplementowałyśmy możliwość dodania użytkownika do bazy danych po jego rejestracji oraz zapisywanie wyników pomiarów tętna i ciśnienia do bazy danych z wynikami pomiarów. Ponadto użytkownik ma możliwość usunięcia swojego konta po naciśnięciu "usuń konto" w layoucie ustawienia (użytkownik i jego dotychczasowe pomiary są wówczas usuwane z bazy danych). Oprócz tego udostępniłyśmy także użytkownikowi opcję edycji godzin wykonywania pomiarów oraz możliwość dokonania zmiany w odpowiedzi na pytanie czy przyjmuje leki, a jeśli tak to jakie. Zaimplementowałyśmy tę funkcjonalność w celu zapewnienia możliwości personalizacji aplikacji i dostosowywania jej do aktualnych potrzeb użytkownika. W celach bezpieczeństwa zapewniłyśmy również hashowanie hasła przed zapisaniem go do bazy danych, a przy wprowadzaniu pomiarów dla zwiększenia wygody użytkownika w polach data i godzina wpisywane są aktualne wartości w danej strefie czasowej.
### WPROWADZANIE WYNIKÓW POMIARÓW
Użytkownik ma możliwość wprowadzenia wyników pomiaru ciśnienia i tętna po kliknięciu "Wprowadź wynik pomiaru" w oknie głównym aplikacji. W oknie do wprowadzenia pomiarów automatycznie wpisywana jest aktualna data oraz godzina, zadaniem użytkownika jest natomiast wpisanie wyniku pomiaru ciśnienia krwi i tętna oraz kliknięcie ZAPISZ WYNIK POMIARU, po tym następuje przeniesienie użytkownika do okna głównego aplikacji.
### STATYSTYKI UŻYTKOWNIKA
Użytkownik aplikacji ma również możliwość monitorowania statystyk wyników swojego ciśnienia i tętna poprzez kliknięcie przycisku "Zobacz swoje statystyki" w oknie głównym aplikacji. Zostaje on wtedy przeniesiony do okna TWOJE STATYSTYKI, w którym może wybrać okres czasu, z którego chce obejrzeć statystyki tzn. z ostatniego tygodnia, miesiąca, czy roku. Wyświetlane są tam daty i godziny wykonywanych pomiarów oraz wprowadzone wartości tętna i ciśnienia, ponadto wartości pomiarów są walidowane względem norm w zależności od wieku i płci użytkownika. Normy tętna zostały zaimplementowane według danych ze strony: https://www.medkart.in/blog/normal-heart-rate-by-age a normy ciśnienia zdefiniowałyśmy zgodnie z informacjami zawartymi na stronie: https://www.verywellhealth.com/average-blood-pressure-by-age-5085328.
### PORADNIK ZDROWIA
Elementem składowym aplikacji jest również poradnik zdrowia, z którego można skorzystać klikając przycisk "Poradnik Zdrowia" na stronie głównej aplikacji, użytkownik jest wtedy przekierowany do strony zawierającej rady w jaki sposób można zadbać o zdrowie swojego serca.
### USTAWIENIA
Użytkownik po kliknięciu przycisku "Ustawienia" na stronie głównej aplikacji jest przenoszony do strony, na której może dokonać zmian w ustawieniach odnośnie przyjmowanych leków i preferowanych godzin wykonywania pomiarów (tzn. użytkownik może zmienić pierwotną odpowiedź na pytane czy bierze leki oraz zmienić godziny, w których chce wykonywać pomiary tętna i ciśnienia). Celem takiego podejścia jest to, by użytkownik miał możliwość spersonalizowania aplikacji w zależności od swojej aktualnej sytuacji np. przebywając na wakacjach może chcieć wykonywać pomiary w innych godzinach niż np. w czasie dni roboczych. Użytkownik w ustawieniach ma również możliwość usunięcia swojego konta (przycisk USUŃ KONTO), ale mamy nadzieję, że nikt nie będzie chciał opuszczać naszej aplikacji :).
### KALENDARZ
Kalendarz wyświetlany w oknie głównym aplikacji ma na celu informowanie użytkownika o statusie wykonanych przez niego w danym dniu pomiarów. Jeśli użytkownik kliknie w wybrany dzień w kalendarzu to w zależności od ilości wykonanych w danym dniu pomiarów, jeśli wykonał >= 3 pomiary otrzyma komunikat: "Jesteś wzorowym użytkownikiem, wymagana ilość pomiarów została osiągnięta :)", jeśli wykonał 2 pomiary pokaże mu się następująca wiadomość: "Wykonano 2 z 3 wymaganych pomiarów, brakuje 1 pomiaru", w przypadku, gdy wykonał jeden pomiar: "Wykonano 1 z 3 wymaganych pomiarów, brakuje 2 pomiarów", a gdy nie wykonał żadnego pomiaru komunikat: "Brak pomiarów dla wybranego dnia :(". Oprócz komunikatów dla dni, w których wykonano pomiary po wiadomości wyświetlają się także godziny pomiaru oraz wartości tętna i ciśnienia wprowadzone przez użytkownika.
### WYLOGOWANIE Z APLIKACJI
W oknie głównym aplikacji po kliknięciu przycisku "Wyloguj" użytkownik zostaje wylogowany z aplikacji i przeniesiony do strony startowej umożliwiającej ponowne zalogowanie lub rejestrację do aplikacji.
## POWIADOMIENIA
Zaimplementowałyśmy wyświetlanie powiadomień w trzech sytuacjach: powiadomienia o konieczności wykonania pomiarów o zdefiniowanych porach (rano/południe/wieczór), powiadomienia o konieczności przyjęcia leku o zadanej w procesie rejestracji godzinie przyjmowania leku oraz powiadomienia informujące użytkownika o tym, iż pomiar, który wprowadził został dodany poprawnie do bazy danych.
